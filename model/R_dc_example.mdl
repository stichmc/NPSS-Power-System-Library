/***
 -------------------------------------------------------------------------------
 |                                                                             |
 | NASA Glenn Research Center                                                  |
 | 21000 Brookpark Rd 		                                                     |
 | Cleveland, OH 44135 	                                                       |
 |                                                                             |
 | File Name:     R_dc_example.mdl                                             |
 | Author(s):	    Jeffrey Csank, David Sadey, Tom Lavelle                      |
 | Date(s):       February 2019                                                |
 |                                                                             |
 | Description:   Basic resistive DC circuit to demonstrate NPSS's circuit     |
 |                solving capability.                                          |
 |                                                                             |
 -------------------------------------------------------------------------------
***/

class DCSource extends Element {
  ElectricOutputPort EP_O;
  ElectricInputPort EP_I1, EP_I2;
}

DCSource DCS {
  Complex V_out;
  V_out.set(10., 0.);
  void prePass() {
    EP_O.setIVRMS(cmplx_zero, V_out);
    EP_I1.setIVRMS(cmplx_zero, cmplx_zero);
    EP_I2.setIVRMS(cmplx_zero, cmplx_zero);
  }
}

Enode n1 {
  ElectricInputPort EP_I;
  ElectricOutputPort EP_O1, EP_O2;
  V_RMS.set(10., 0.); // guess value
}

Resistor R1 {
	R = 1.;
}

Resistor R2 {
	R = 2.;
}

Resistor R3 {
	R = 2.;
}


linkPorts("DCS.EP_O", "R1.EP_I", "PORT1");
linkPorts("R1.EP_O", "n1.EP_I" ,"NODE2");
linkPorts("n1.EP_O1", "R2.EP_I", "NODE3");
linkPorts("R2.EP_O", "DCS.EP_I1" ,"PORT4");
linkPorts("n1.EP_O2", "R3.EP_I", "NODE5");
linkPorts("R3.EP_O", "DCS.EP_I2" ,"PORT6");

setOption("ElectricPowerType", "DC");


